services:
  web-check:
    container_name: Web-Check-Checkit
    build:
      context: .
      dockerfile: Dockerfile.dev
    ports:
      - "3003:4321"  # Frontend (Astro dev)
      - "3004:3001"  # Backend (Express API)
    restart: unless-stopped
    environment:
      - NODE_ENV=development
      - PORT=3001
      # PUBLIC_API_ENDPOINT removed - use relative /api paths
    volumes:
      # Mount source code for live updates without rebuild
      - ./src:/app/src:ro
      - ./server:/app/server:ro
      - ./api:/app/api:ro
      - ./public:/app/public:ro
      # Mount database folder (code files update, checkit.db persists on host)
      # The deploy script excludes checkit.db from transfer, so host db persists
      - ./database:/app/database
